# Maintainer: Claus Klein <claus.klein@arcormail.de>
# TODO: warning: A compatible version of re2c (>= 0.11.3) was not found

pkgname=ninja
pkgver=1.8.2
pkgrel=1
pkgdesc='Ninja is a small build system with a focus on speed.'
arch=(any)
url='https://ninja-build.org/'
options=('strip')
license=('Apache License')
depends=("gcc-libs")
makedepends=(git gcc python2)
source=('git+https://github.com/ninja-build/ninja')
sha256sums=('SKIP')

prepare() {
  cd "${srcdir}/ninja"
  git checkout -q release
  git checkout -q "v${pkgver}"
}

build() {
  cd "${srcdir}/ninja"
  python2 configure.py --bootstrap
}

package() {
  cd "${srcdir}/ninja"
  install ninja.exe "${pkgdir}"
  install -Dm644 COPYING "${pkgdir}/usr/share/licenses/ninja/COPYING"
}
